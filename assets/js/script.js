// Translations
const translations = {
    uz: {
        nav: {
            about: 'Biz haqimizda',
            programs: 'Dasturlar',
            events: 'Tadbirlar',
            team: 'Jamoa',
            contacts: 'Aloqa',
            join: 'Qo\'shilish'
        },
        hero: {
            tag: 'Barqaror rivojlanish tashabbusi',
            title1: 'Universitetlar bilan birga',
            title2: 'yashil',
            title3: 'kelajak yaratamiz',
            subtitle: 'Green Campus Initiative talabalar, o\'qituvchilar va ma\'muriyatni ekologik barqaror ta\'lim muhitini yaratish uchun birlashtiradi',
            startNow: 'Hozir boshlash',
            watchVideo: 'Videoni ko\'rish'
        },
        stats: [
            { number: '47%', label: 'Uglerod izini kamaytirish' },
            { number: '12K+', label: 'Faol ishtirokchilar' },
            { number: '89', label: 'Hamkor universitetlar' },
            { number: '2.3M', label: 'Ekilgan daraxtlar' }
        ],
        scroll: 'Pastga aylantiring',
        about: {
            tag: 'Green Campus Initiative haqida',
            title: 'Avlodlarni birlashtiruvchi missiya',
            p1: '2018-yildan beri biz har bir universitet kampusini ekologik mas\'uliyat namunasiga aylantirishga intilamiz. Bizning missiyamiz nafaqat hududlarni ko\'kalamzorlashtirish, balki barqaror rivojlanish madaniyatini yaratishdir.',
            p2: 'Biz ishonamizki, universitetlar devorlarida jamiyatning atrof-muhitga munosabatini o\'zgartiradigan yetakchilar shakllanadi.',
            values: [
                { title: 'Ilm va innovatsiya', desc: 'Tadqiqotlarga asoslangan yechimlar' },
                { title: 'Jamoa', desc: 'Butun mamlakat bo\'ylab faollarni birlashtiramiz' },
                { title: 'Barqarorlik', desc: 'Uzoq muddatli ekologik yechimlar' }
            ],
            imageLabel: 'Bizning ko\'ngillilar faoliyatda',
            award: '"Yilning yashil kampusi" mukofoti 2024'
        },
        programs: {
            tag: 'Bizning dasturlarimiz',
            title: 'Kampus ekologiyasiga kompleks yondashuv',
            subtitle: 'Universitetlarni barqaror rivojlanish markazlariga aylantiradigan to\'rtta asosiy yo\'nalish',
            items: [
                { title: 'Yashil Kampus', description: 'Universitet hududlarini ekologizatsiya qilish kompleks dasturi: ko\'kalamzorlashtirish, chiqindilarni saralash.' },
                { title: 'Eko-Laboratoriyalar', description: 'Barqaror rivojlanish uchun innovatsion yechimlar ishlab chiquvchi talabalar tadqiqot guruhlari.' },
                { title: 'Toza Energiya', description: 'Kampuslarni qayta tiklanadigan energiya manbalariga o\'tkazish: quyosh panellari, shamol generatorlari.' },
                { title: 'Nol Chiqindi', description: 'Qayta ishlash, kompostlash va ongli iste\'mol orqali chiqindilarni minimallashtirish dasturi.' }
            ],
            learnMore: 'Batafsil'
        },
        impact: {
            tag: 'Bizning ta\'sirimiz',
            title: '6 yil davomida biz universitet kampusi qanday bo\'lishi mumkinligi haqidagi tasavvurni o\'zgartirdik',
            stats: [
                { number: '156', label: 'Amalga oshirilgan eko-loyihalar' },
                { number: '$2M', label: 'Jalb qilingan moliyalashtirish' },
                { number: '320', label: 'Tonna CO₂ kompensatsiya qilindi' }
            ],
            report: 'Yillik hisobotni o\'qish'
        },
        events: {
            tag: 'Tadbirlar taqvimi',
            title: 'Yaqinlashib kelayotgan tadbirlar',
            allEvents: 'Barcha tadbirlar',
            register: 'Ro\'yxatdan o\'tish',
            items: [
                { date: '15', month: 'Yan', title: 'Eko-forum 2025', location: 'Toshkent, O\'zbekiston' },
                { date: '22', month: 'Fev', title: 'Daraxt ekish kuni', location: 'Barcha kampuslar' },
                { date: '05', month: 'Mar', title: 'GreenTech Hackathon', location: 'Samarqand' },
                { date: '22', month: 'Apr', title: 'Yer kuni', location: 'Onlayn + oflayn' }
            ]
        },
        team: {
            tag: 'Bizning jamoa',
            title: 'Buni amalga oshirayotgan odamlar',
            members: [
                { name: 'Aziza Yashilova', role: 'Asoschisi va direktori' },
                { name: 'Jasur Tabiatov', role: 'Dasturlar koordinatori' },
                { name: 'Nilufar Ekova', role: 'Ilmiy maslahatchi' },
                { name: 'Bobur Kampusov', role: 'Universitetlar bilan aloqa' }
            ]
        },
        cta: {
            title: 'Kampusingizni yashil qilishga tayyormisiz?',
            subtitle: 'Barqaror kelajak uchun harakatga qo\'shiling. Birgalikda ko\'proq narsaga erishamiz!',
            partner: 'Hamkor bo\'lish',
            volunteer: 'Ko\'ngilli bo\'lish'
        },
        footer: {
            desc: 'Kelajak ta\'limi uchun ekologik barqaror kampuslar yaratamiz',
            navigation: 'Navigatsiya',
            resources: 'Resurslar',
            contacts: 'Aloqa',
            links: ['Biz haqimizda', 'Dasturlar', 'Tadbirlar', 'Yangiliklar'],
            resourceLinks: ['Uslubiy materiallar', 'Tadqiqotlar', 'TSS', 'OAV uchun'],
            copyright: '© 2025 Green Campus Initiative. Barcha huquqlar himoyalangan.',
            privacy: 'Maxfiylik siyosati',
            terms: 'Foydalanish shartlari'
        }
    },
    ru: {
        nav: {
            about: 'О нас',
            programs: 'Программы',
            events: 'События',
            team: 'Команда',
            contacts: 'Контакты',
            join: 'Присоединиться'
        },
        hero: {
            tag: 'Инициатива устойчивого развития',
            title1: 'Создаём',
            title2: 'зелёное',
            title3: 'будущее вместе с университетами',
            subtitle: 'Green Campus Initiative объединяет студентов, преподавателей и администрацию для создания экологически устойчивых образовательных пространств',
            startNow: 'Начать сейчас',
            watchVideo: 'Смотреть видео'
        },
        stats: [
            { number: '47%', label: 'Снижение углеродного следа' },
            { number: '12K+', label: 'Активных участников' },
            { number: '89', label: 'Партнёрских вузов' },
            { number: '2.3M', label: 'Посаженных деревьев' }
        ],
        scroll: 'Листайте вниз',
        about: {
            tag: 'О Green Campus Initiative',
            title: 'Миссия, которая объединяет поколения',
            p1: 'С 2018 года мы работаем над тем, чтобы каждый университетский кампус стал примером экологической ответственности. Наша миссия — не просто озеленение территорий, а создание культуры устойчивого развития.',
            p2: 'Мы верим, что именно в стенах университетов формируются лидеры, которые изменят отношение общества к окружающей среде.',
            values: [
                { title: 'Наука и инновации', desc: 'Решения, основанные на исследованиях' },
                { title: 'Сообщество', desc: 'Объединяем активистов со всей страны' },
                { title: 'Устойчивость', desc: 'Долгосрочные экологические решения' }
            ],
            imageLabel: 'Наши волонтёры в действии',
            award: 'Премия «Зелёный кампус года» 2024'
        },
        programs: {
            tag: 'Наши программы',
            title: 'Комплексный подход к экологии кампуса',
            subtitle: 'Четыре ключевых направления, которые трансформируют университеты в центры устойчивого развития',
            items: [
                { title: 'Зелёный Кампус', description: 'Комплексная программа экологизации университетских территорий: озеленение, раздельный сбор отходов.' },
                { title: 'Эко-Лаборатории', description: 'Студенческие исследовательские группы, разрабатывающие инновационные решения для устойчивого развития.' },
                { title: 'Чистая Энергия', description: 'Переход кампусов на возобновляемые источники энергии: солнечные панели, ветрогенераторы.' },
                { title: 'Ноль Отходов', description: 'Программа минимизации отходов через переработку, компостирование и осознанное потребление.' }
            ],
            learnMore: 'Подробнее'
        },
        impact: {
            tag: 'Наше влияние',
            title: 'За 6 лет мы изменили представление о том, каким может быть университетский кампус',
            stats: [
                { number: '156', label: 'Эко-проектов реализовано' },
                { number: '₽45M', label: 'Привлечено финансирования' },
                { number: '320', label: 'Тонн CO₂ компенсировано' }
            ],
            report: 'Читать годовой отчёт'
        },
        events: {
            tag: 'Календарь событий',
            title: 'Ближайшие мероприятия',
            allEvents: 'Все события',
            register: 'Регистрация',
            items: [
                { date: '15', month: 'Янв', title: 'Эко-форум 2025', location: 'МГУ, Москва' },
                { date: '22', month: 'Фев', title: 'День посадки деревьев', location: 'Все кампусы' },
                { date: '05', month: 'Мар', title: 'Хакатон GreenTech', location: 'СПбГУ' },
                { date: '22', month: 'Апр', title: 'День Земли', location: 'Онлайн + офлайн' }
            ]
        },
        team: {
            tag: 'Наша команда',
            title: 'Люди, которые делают это возможным',
            members: [
                { name: 'Анна Лесникова', role: 'Основатель и директор' },
                { name: 'Михаил Зеленин', role: 'Координатор программ' },
                { name: 'Елена Природина', role: 'Научный консультант' },
                { name: 'Дмитрий Экович', role: 'Связи с университетами' }
            ]
        },
        cta: {
            title: 'Готовы сделать ваш кампус зелёным?',
            subtitle: 'Присоединяйтесь к движению за устойчивое будущее. Вместе мы можем больше!',
            partner: 'Стать партнёром',
            volunteer: 'Стать волонтёром'
        },
        footer: {
            desc: 'Создаём экологически устойчивые кампусы для образования будущего',
            navigation: 'Навигация',
            resources: 'Ресурсы',
            contacts: 'Контакты',
            links: ['О нас', 'Программы', 'События', 'Новости'],
            resourceLinks: ['Методические материалы', 'Исследования', 'FAQ', 'Для СМИ'],
            copyright: '© 2025 Green Campus Initiative. Все права защищены.',
            privacy: 'Политика конфиденциальности',
            terms: 'Условия использования'
        }
    },
    en: {
        nav: {
            about: 'About',
            programs: 'Programs',
            events: 'Events',
            team: 'Team',
            contacts: 'Contact',
            join: 'Join Us'
        },
        hero: {
            tag: 'Sustainable Development Initiative',
            title1: 'Creating a',
            title2: 'green',
            title3: 'future together with universities',
            subtitle: 'Green Campus Initiative unites students, faculty, and administration to create environmentally sustainable educational spaces',
            startNow: 'Get Started',
            watchVideo: 'Watch Video'
        },
        stats: [
            { number: '47%', label: 'Carbon Footprint Reduction' },
            { number: '12K+', label: 'Active Participants' },
            { number: '89', label: 'Partner Universities' },
            { number: '2.3M', label: 'Trees Planted' }
        ],
        scroll: 'Scroll down',
        about: {
            tag: 'About Green Campus Initiative',
            title: 'A Mission That Unites Generations',
            p1: 'Since 2018, we have been working to make every university campus a model of environmental responsibility. Our mission is not just about greening territories, but creating a culture of sustainable development.',
            p2: 'We believe that it is within university walls that leaders are formed who will change society\'s attitude towards the environment.',
            values: [
                { title: 'Science & Innovation', desc: 'Research-based solutions' },
                { title: 'Community', desc: 'Uniting activists across the country' },
                { title: 'Sustainability', desc: 'Long-term environmental solutions' }
            ],
            imageLabel: 'Our volunteers in action',
            award: '"Green Campus of the Year" Award 2024'
        },
        programs: {
            tag: 'Our Programs',
            title: 'A Comprehensive Approach to Campus Ecology',
            subtitle: 'Four key directions that transform universities into sustainable development centers',
            items: [
                { title: 'Green Campus', description: 'Comprehensive program for campus greening: landscaping, waste sorting, energy efficiency.' },
                { title: 'Eco-Labs', description: 'Student research groups developing innovative solutions for sustainable development.' },
                { title: 'Clean Energy', description: 'Transitioning campuses to renewable energy sources: solar panels, wind turbines.' },
                { title: 'Zero Waste', description: 'Waste minimization program through recycling, composting, and conscious consumption.' }
            ],
            learnMore: 'Learn More'
        },
        impact: {
            tag: 'Our Impact',
            title: 'In 6 years, we have changed the perception of what a university campus can be',
            stats: [
                { number: '156', label: 'Eco-projects Implemented' },
                { number: '$2M', label: 'Funding Raised' },
                { number: '320', label: 'Tons of CO₂ Offset' }
            ],
            report: 'Read Annual Report'
        },
        events: {
            tag: 'Event Calendar',
            title: 'Upcoming Events',
            allEvents: 'All Events',
            register: 'Register',
            items: [
                { date: '15', month: 'Jan', title: 'Eco-Forum 2025', location: 'Tashkent, Uzbekistan' },
                { date: '22', month: 'Feb', title: 'Tree Planting Day', location: 'All Campuses' },
                { date: '05', month: 'Mar', title: 'GreenTech Hackathon', location: 'Samarkand' },
                { date: '22', month: 'Apr', title: 'Earth Day', location: 'Online + Offline' }
            ]
        },
        team: {
            tag: 'Our Team',
            title: 'The People Making It Happen',
            members: [
                { name: 'Anna Greenwood', role: 'Founder & Director' },
                { name: 'Michael Rivers', role: 'Programs Coordinator' },
                { name: 'Elena Forest', role: 'Scientific Advisor' },
                { name: 'David Campus', role: 'University Relations' }
            ]
        },
        cta: {
            title: 'Ready to Make Your Campus Green?',
            subtitle: 'Join the movement for a sustainable future. Together we can do more!',
            partner: 'Become a Partner',
            volunteer: 'Become a Volunteer'
        },
        footer: {
            desc: 'Creating environmentally sustainable campuses for the education of the future',
            navigation: 'Navigation',
            resources: 'Resources',
            contacts: 'Contact',
            links: ['About', 'Programs', 'Events', 'News'],
            resourceLinks: ['Methodological Materials', 'Research', 'FAQ', 'For Media'],
            copyright: '© 2025 Green Campus Initiative. All rights reserved.',
            privacy: 'Privacy Policy',
            terms: 'Terms of Use'
        }
    }
};

// SVG Icons for programs
const programIcons = [
    // Building2
    `<svg class="icon" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#84cc16" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"/>
        <path d="M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"/>
        <path d="M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"/>
        <path d="M10 6h4"/>
        <path d="M10 10h4"/>
        <path d="M10 14h4"/>
        <path d="M10 18h4"/>
    </svg>`,
    // FlaskConical
    `<svg class="icon" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#84cc16" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2"/>
        <path d="M8.5 2h7"/>
        <path d="M7 16h10"/>
    </svg>`,
    // Zap
    `<svg class="icon" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#84cc16" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
    </svg>`,
    // Recycle
    `<svg class="icon" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#84cc16" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5"/>
        <path d="M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12"/>
        <path d="m14 16-3 3 3 3"/>
        <path d="M8.293 13.596 4.875 9.5 8.5 5"/>
        <path d="m9.5 5 4 7h5"/>
        <path d="m15.5 5-1.5 3"/>
    </svg>`
];

// SVG Icons for impact section
const impactIcons = [
    // BarChart3
    `<svg class="icon" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#a3e635" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <path d="M3 3v18h18"/>
        <path d="M18 17V9"/>
        <path d="M13 17V5"/>
        <path d="M8 17v-3"/>
    </svg>`,
    // TrendingUp
    `<svg class="icon" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#a3e635" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/>
        <polyline points="16 7 22 7 22 13"/>
    </svg>`,
    // Leaf
    `<svg class="icon" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#a3e635" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <path d="M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z"/>
        <path d="M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12"/>
    </svg>`
];

// SVG Icons for values
const valueIcons = [
    // Target
    `<svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#84cc16" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="10"/>
        <circle cx="12" cy="12" r="6"/>
        <circle cx="12" cy="12" r="2"/>
    </svg>`,
    // Handshake
    `<svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#84cc16" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="m11 17 2 2a1 1 0 1 0 3-3"/>
        <path d="m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4"/>
        <path d="m21 3 1 11h-2"/>
        <path d="M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3"/>
        <path d="M3 4h8"/>
    </svg>`,
    // Sprout
    `<svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#84cc16" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M7 20h10"/>
        <path d="M10 20c5.5-2.5.8-6.4 3-10"/>
        <path d="M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z"/>
        <path d="M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z"/>
    </svg>`
];

// State
let currentLang = 'en';
let langMenuOpen = false;
let countersVisible = false;
let animatedNumbers = [0, 0, 0, 0];

// DOM Elements
const gradientOrb = document.getElementById('gradientOrb');
const nav = document.getElementById('nav');
const langBtn = document.getElementById('langBtn');
const langDropdown = document.getElementById('langDropdown');
const currentLangEl = document.getElementById('currentLang');
const heroStats = document.getElementById('heroStats');

// Initialize
document.addEventListener('DOMContentLoaded', function() {
    updateLanguage();
    renderDynamicContent();
    setupEventListeners();
    setupIntersectionObserver();
});

// Event Listeners
function setupEventListeners() {
    // Scroll event
    window.addEventListener('scroll', handleScroll);

    // Mouse move for gradient orb
    window.addEventListener('mousemove', handleMouseMove);

    // Language button
    langBtn.addEventListener('click', toggleLangMenu);

    // Language options
    document.querySelectorAll('.lang-option').forEach(option => {
        option.addEventListener('click', () => {
            const lang = option.dataset.lang;
            setLanguage(lang);
        });
    });

    // Close language dropdown when clicking outside
    document.addEventListener('click', (e) => {
        if (!e.target.closest('.lang-selector')) {
            langDropdown.classList.remove('open');
            langMenuOpen = false;
        }
    });
}

// Handle scroll
function handleScroll() {
    const scrollY = window.scrollY;

    if (scrollY > 50) {
        nav.classList.add('scrolled');
    } else {
        nav.classList.remove('scrolled');
    }
}

// Handle mouse move
function handleMouseMove(e) {
    gradientOrb.style.left = (e.clientX - 300) + 'px';
    gradientOrb.style.top = (e.clientY - 300) + 'px';
}

// Toggle language menu
function toggleLangMenu(e) {
    e.stopPropagation();
    langMenuOpen = !langMenuOpen;
    langDropdown.classList.toggle('open', langMenuOpen);
}

// Set language
function setLanguage(lang) {
    currentLang = lang;
    currentLangEl.textContent = lang.toUpperCase();
    langDropdown.classList.remove('open');
    langMenuOpen = false;

    // Update active state
    document.querySelectorAll('.lang-option').forEach(option => {
        option.classList.toggle('active', option.dataset.lang === lang);
    });

    updateLanguage();
    renderDynamicContent();
}

// Update language
function updateLanguage() {
    const t = translations[currentLang];

    // Navigation
    document.querySelectorAll('[data-key]').forEach(el => {
        const key = el.dataset.key;
        if (t.nav[key]) {
            el.textContent = t.nav[key];
        }
    });

    document.querySelectorAll('[data-nav]').forEach(el => {
        const key = el.dataset.nav;
        if (t.nav[key]) {
            el.textContent = t.nav[key];
        }
    });

    // Hero
    document.querySelectorAll('[data-hero]').forEach(el => {
        const key = el.dataset.hero;
        if (t.hero[key]) {
            el.textContent = key === 'title2' ? ' ' + t.hero[key] + ' ' : t.hero[key];
        }
    });

    // Stats labels
    document.querySelectorAll('[data-stat]').forEach(el => {
        const index = parseInt(el.dataset.stat);
        if (t.stats[index]) {
            el.textContent = t.stats[index].label;
        }
    });

    // Scroll
    document.querySelectorAll('[data-scroll]').forEach(el => {
        el.textContent = t.scroll;
    });

    // About
    document.querySelectorAll('[data-about]').forEach(el => {
        const key = el.dataset.about;
        if (t.about[key]) {
            el.textContent = t.about[key];
        }
    });

    // Programs
    document.querySelectorAll('[data-programs]').forEach(el => {
        const key = el.dataset.programs;
        if (t.programs[key]) {
            el.textContent = t.programs[key];
        }
    });

    // Impact
    document.querySelectorAll('[data-impact]').forEach(el => {
        const key = el.dataset.impact;
        if (t.impact[key]) {
            el.textContent = t.impact[key];
        }
    });

    // Events
    document.querySelectorAll('[data-events]').forEach(el => {
        const key = el.dataset.events;
        if (t.events[key]) {
            el.textContent = t.events[key];
        }
    });

    // Team
    document.querySelectorAll('[data-team]').forEach(el => {
        const key = el.dataset.team;
        if (t.team[key]) {
            el.textContent = t.team[key];
        }
    });

    // CTA
    document.querySelectorAll('[data-cta]').forEach(el => {
        const key = el.dataset.cta;
        if (t.cta[key]) {
            el.textContent = t.cta[key];
        }
    });

    // Footer
    document.querySelectorAll('[data-footer]').forEach(el => {
        const key = el.dataset.footer;
        if (t.footer[key]) {
            el.textContent = t.footer[key];
        }
    });
}

// Render dynamic content
function renderDynamicContent() {
    const t = translations[currentLang];

    // About Values
    const aboutValues = document.getElementById('aboutValues');
    aboutValues.innerHTML = t.about.values.map((val, i) => `
        <div class="value-item">
            <div class="value-icon-wrap">
                ${valueIcons[i]}
            </div>
            <div>
                <h4 class="value-title">${val.title}</h4>
                <p class="value-desc">${val.desc}</p>
            </div>
        </div>
    `).join('');

    // Programs
    const programsGrid = document.getElementById('programsGrid');
    programsGrid.innerHTML = t.programs.items.map((program, i) => `
        <div class="program-card">
            <div class="program-icon-wrap">
                ${programIcons[i]}
            </div>
            <h3 class="program-title">${program.title}</h3>
            <p class="program-desc">${program.description}</p>
            <a href="#" class="program-link">
                ${t.programs.learnMore}
                <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M5 12h14"/>
                    <path d="m12 5 7 7-7 7"/>
                </svg>
            </a>
            <div class="program-glow"></div>
        </div>
    `).join('');

    // Impact Stats
    const impactGrid = document.getElementById('impactGrid');
    impactGrid.innerHTML = t.impact.stats.map((stat, i) => `
        <div class="impact-item">
            ${impactIcons[i]}
            <span class="impact-number">${stat.number}</span>
            <span class="impact-label">${stat.label}</span>
        </div>
    `).join('');

    // Events
    const eventsGrid = document.getElementById('eventsGrid');
    eventsGrid.innerHTML = t.events.items.map(event => `
        <div class="event-card">
            <div class="event-date">
                <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="rgba(255,255,255,0.7)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-bottom: 4px;">
                    <rect width="18" height="18" x="3" y="4" rx="2" ry="2"/>
                    <line x1="16" x2="16" y1="2" y2="6"/>
                    <line x1="8" x2="8" y1="2" y2="6"/>
                    <line x1="3" x2="21" y1="10" y2="10"/>
                </svg>
                <span class="event-day">${event.date}</span>
                <span class="event-month">${event.month}</span>
            </div>
            <div class="event-info">
                <h4 class="event-title">${event.title}</h4>
                <p class="event-location">
                    <svg class="icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/>
                        <circle cx="12" cy="10" r="3"/>
                    </svg>
                    ${event.location}
                </p>
            </div>
            <button class="event-btn">
                ${t.events.register}
                <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M5 12h14"/>
                    <path d="m12 5 7 7-7 7"/>
                </svg>
            </button>
        </div>
    `).join('');

    // Team
    const teamGrid = document.getElementById('teamGrid');
    teamGrid.innerHTML = t.team.members.map(member => `
        <div class="team-card">
            <div class="team-avatar-wrap">
                <div class="team-avatar">
                    <svg class="icon" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#84cc16" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                        <circle cx="9" cy="7" r="4"/>
                        <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                    </svg>
                </div>
                <div class="team-avatar-ring"></div>
            </div>
            <h4 class="team-name">${member.name}</h4>
            <p class="team-role">${member.role}</p>
            <div class="team-social">
                <div class="social-icon">
                    <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#84cc16" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect width="20" height="16" x="2" y="4" rx="2"/>
                        <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/>
                    </svg>
                </div>
                <div class="social-icon">
                    <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#84cc16" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/>
                        <rect width="4" height="12" x="2" y="9"/>
                        <circle cx="4" cy="4" r="2"/>
                    </svg>
                </div>
                <div class="social-icon">
                    <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#84cc16" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"/>
                    </svg>
                </div>
            </div>
        </div>
    `).join('');

    // Footer Nav Links
    const footerNavLinks = document.getElementById('footerNavLinks');
    footerNavLinks.innerHTML = t.footer.links.map(link => `
        <a href="#" class="footer-link">${link}</a>
    `).join('');

    // Footer Resource Links
    const footerResourceLinks = document.getElementById('footerResourceLinks');
    footerResourceLinks.innerHTML = t.footer.resourceLinks.map(link => `
        <a href="#" class="footer-link">${link}</a>
    `).join('');
}

// Setup Intersection Observer for counter animation
function setupIntersectionObserver() {
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting && !countersVisible) {
                countersVisible = true;
                animateCounters();
            }
        });
    }, { threshold: 0.3 });

    if (heroStats) {
        observer.observe(heroStats);
    }
}

// Animate counters
function animateCounters() {
    const targets = [47, 12, 89, 2.3];
    const duration = 2000;
    const steps = 60;
    const interval = duration / steps;

    let step = 0;
    const timer = setInterval(() => {
        step++;
        animatedNumbers = targets.map(target =>
            Math.min(target, (target / steps) * step)
        );

        document.getElementById('stat0').textContent = Math.round(animatedNumbers[0]) + '%';
        document.getElementById('stat1').textContent = Math.round(animatedNumbers[1]) + 'K+';
        document.getElementById('stat2').textContent = Math.round(animatedNumbers[2]);
        document.getElementById('stat3').textContent = animatedNumbers[3].toFixed(1) + 'M';

        if (step >= steps) {
            clearInterval(timer);
        }
    }, interval);
}